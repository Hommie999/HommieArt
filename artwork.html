<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>My Artwork</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portfolio website of Hommie, freelance illustrator from Thailand. Explore digital art, traditional art, and tote bag designs." />
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="CSS/theme.css" /> 
    <link rel="stylesheet" type="text/css" href="CSS/artwork.css" />
    <!-- Javascript -->
    <script src="JS/script.js" defer></script>
    <link rel="icon" type="image/ico" href="image/Gai.png">
    <!--  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
<!-- ‡πÅ‡∏ñ‡∏ö‡∏ô‡∏≥‡∏ó‡∏≤‡∏á  ================= -->
<div id="navbar"></div>

<!-- ‡∏´‡∏°‡∏ß‡∏î‡∏õ‡∏µ -->
<div class="year-filter">
  <button class="filter-btn active" data-filter="all">Main</button>
  <button class="filter-btn" data-filter="2025">2025</button>
  <button class="filter-btn" data-filter="2024">2024</button>
  <button class="filter-btn" data-filter="2023">2023</button>
</div>

<div id="gallery-container" class="gallery-container">
  <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ú‡∏•‡∏á‡∏≤‡∏ô... üé®</p>
</div>

<footer>
  <!-- link -->
  <div class="social-links">
  <a href="https://x.com/Narida0" target="_blank"><i class="fa-brands fa-x-twitter"></i></a>
  <a href="https://www.facebook.com/hom.mie.608859" target="_blank"><i class="fab fa-facebook"></i></a>
  <a href="https://www.instagram.com/naridakh/" target="_blank"><i class="fab fa-instagram"></i></a>
  <a href="https://github.com/Hommie999" target="_blank"><i class="fab fa-github"></i></a>
  <a href="" target="_blank"><i class=""></i></a>
  </div>

  <div style="text-align: center; font-size: 0.9em; color: #777;">
  ¬© 2025 Hommie. All rights reserved.
  </div>
</footer>
</html>

<script>
// 2. ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å JSON
let allArtworks = [];
// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
fetch('artwork.json')
  .then(res => res.json())
  .then(data => {
    allArtworks = data;
    renderGallery('all');
  })
  .catch(err => {
    document.getElementById('gallery-container').innerHTML = 
      '<p>‚ùå ‡πÇ‡∏´‡∏•‡∏î‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå data/artworks.json</p>';
  });

// ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏µ (‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤)
function groupByYear(works) {
  const groups = {};
  works.forEach(art => {
    if (!groups[art.year]) groups[art.year] = [];
    groups[art.year].push(art);
  });
  return Object.keys(groups)
    .sort((a, b) => b - a)
    .map(year => ({ year: parseInt(year), artworks: groups[year] }));
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏¥‡πâ‡∏ô
function createItem(art) {
  return `
    <div class="artwork-item">
      <a href="art-detail.html?id=${art.id}">
        <img src="${art.mainImage}" alt="${art.title}" loading="lazy">
      </a>
    </div>
  `;
}

// ‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ
function renderGallery(filter) {
  const container = document.getElementById('gallery-container');
  
  if (filter === 'all') {
    // ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏∏‡∏Å‡∏õ‡∏µ‡πÅ‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°
    const groups = groupByYear(allArtworks);
    let html = '';
    groups.forEach(group => {
      html += `<h2 class="year-header">${group.year}</h2>`;
      html += `<div class="masonry-grid">`;
      group.artworks.forEach(art => html += createItem(art));
      html += `</div>`;
    });
    container.innerHTML = html || '<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Ñ‡πà‡∏∞ üå∏</p>';
  } else {
    // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
    const year = parseInt(filter);
    const filtered = allArtworks.filter(art => art.year === year);
    if (filtered.length === 0) {
      container.innerHTML = `<h2 class="year-header">${year}</h2><p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏õ‡∏µ‡∏ô‡∏µ‡πâ‡∏Ñ‡πà‡∏∞ üåº</p>`;
    } else {
      container.innerHTML = `
        <h2 class="year-header">${year}</h2>
        <div class="masonry-grid">
          ${filtered.map(createItem).join('')}
        </div>
      `;
    }
  }
}

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      renderGallery(btn.dataset.filter);
    });
  });
});
</script>